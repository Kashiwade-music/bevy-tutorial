# bevy-tutorial

## アプリのスケジュールについて
- 初回に一回だけ
  - StartUp
    - Window作成やMIDIの読み込み、カメラの設定等
  - PostStartUp
    - StartUp時点でMIDIやカメラが読みこまれるので、それを描画する
    - 初期の描画は全てPostStartUpで行う
- 毎フレーム
  - PreUpdate
    - ステータスやTimeAxisの更新
  - Update
    - PreUpdateによって更新された情報の描画

## 再生可能なフォーマット
- OGG
他の奴は試してもだめだった。

## テーマ・トランジション・レイアウトシステムについての仕様
- レイアウトシステム
  - ウィンドウ縦・横のうち長辺を100%とした、フレキシブルなレイアウトシステム
  - 要素の左上と右下の位置を指定
    - 実際の要素は、まずtransformで要素の座標系を(left, bottom)に移動し
    - 各要素の相対座標系の中では、軸の第一正眼に描画する
- テーマ
  - テーマファイルのパスを配列で入力
  - 曲の途中でテーマを変えられるようにする
    - Ch.16のC-1~順番に、連番で。
  - デフォルトテーマ（起動時テーマ）はindex=0
  - テーマの仕様
    - `backgound_hex`
      - ウィンドウの背景色
    - `note_channel_base_hex`
      - MIDIノートのベースとなるカラー
      - この色そのままのものが、ch.1の描画に使われる
    - `note_channel_target_hex`
      - MIDIノートのチャンネルが増えるにつれて、`note_channel_base_hex`に足し合わされる色
      - 隣接する色相環の色が良い
      - この色そのままのものは描画されない
    - `accent_base_hex`
      - アクセントカラー
      - 背景色が足し合わされて、3つの色から重要度別に使われる
    - `main_base_hex`
      - メインのテキストの色
      - 背景色が足し合わされて、3つの色から重要度別に使われる
- トランジション・エフェクト
  - midiのch16の適当なキーのNoteOnでエフェクトが起こる
  - 長さも使えるかも
  - カメラ動かす系は簡単そうだが...